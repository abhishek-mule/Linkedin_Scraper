{% extends "layout.html" %}

{% block title %}{{ profile.name }} - LinkedIn Profile{% endblock %}

{% block extra_css %}
<style>
    .profile-header {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        margin-bottom: 2rem;
    }
    
    .profile-picture {
        width: 180px;
        height: 180px;
        object-fit: cover;
        border-radius: 50%;
        border: 5px solid white;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .profile-section-card {
        border-radius: 12px;
        overflow: hidden;
        border: none;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        height: 100%;
        transition: all 0.3s ease;
    }
    
    .profile-section-card:hover {
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        transform: translateY(-5px);
    }
    
    .card-header.header-linkedin {
        background: linear-gradient(135deg, #0077B5 0%, #00a0dc 100%);
        color: white;
        padding: 1rem 1.5rem;
    }
    
    .skill-badge {
        background-color: #f8f9fa;
        color: #495057;
        border-radius: 50px;
        padding: 0.5rem 1rem;
        margin: 0.25rem;
        display: inline-block;
        font-weight: 500;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
    }
    
    .skill-badge:hover {
        background-color: #0077B5;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    
    .contact-item {
        margin-bottom: 0.75rem;
        transition: all 0.3s ease;
    }
    
    .contact-item:hover {
        transform: translateX(5px);
    }
    
    .contact-item i {
        width: 20px;
        color: #0077B5;
        text-align: center;
        margin-right: 0.5rem;
    }
    
    .btn-back {
        border-radius: 50px;
        padding-left: 1.5rem;
        padding-right: 1.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }
    
    .btn-back:hover {
        transform: translateX(-5px);
    }
    
    .btn-linkedin-profile {
        background-color: #0077B5;
        color: white;
        border-radius: 50px;
        padding: 0.5rem 1.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }
    
    .btn-linkedin-profile:hover {
        background-color: #005e93;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0,119,181,0.3);
    }
    
    .role-badge {
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-weight: 500;
        display: inline-block;
        margin-top: 1rem;
    }
    
    .role-badge.faculty {
        background-color: #0077B5;
        color: white;
    }
    
    .role-badge.student {
        background-color: #36B37E;
        color: white;
    }
    
    .experience-item, .education-item {
        padding: 1.25rem;
        border-radius: 8px;
        margin-bottom: 1.25rem;
        transition: all 0.3s ease;
    }
    
    .experience-item:hover, .education-item:hover {
        background-color: #f8f9fa;
        transform: translateX(5px);
    }
    
    .section-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }
    
    .section-subtitle {
        font-size: 0.95rem;
        color: #6c757d;
    }
    
    .date-range {
        font-size: 0.85rem;
        color: #6c757d;
        margin-bottom: 0.5rem;
    }
    
    .location-text {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    .description-text {
        margin-top: 0.75rem;
        font-size: 0.95rem;
    }
</style>
{% endblock %}

{% block content %}
    <!-- Back button -->
    <div class="mb-4">
        <a href="{{ url_for('index') }}" class="btn btn-outline-primary btn-back">
            <i class="fas fa-arrow-left me-2"></i> Back to Profiles
        </a>
    </div>
    
    <!-- Profile header -->
    <div class="profile-header">
        <div class="row align-items-center">
            <div class="col-md-3 text-center">
                <!-- Profile picture -->
                <img src="{{ profile.image_url }}" alt="{{ profile.name }}" class="profile-picture">
                
                <!-- Role type badge -->
                {% if profile.role_type == 'Faculty' %}
                    <div class="mt-3">
                        <span class="role-badge faculty">
                            <i class="fas fa-chalkboard-teacher me-2"></i>Faculty
                        </span>
                    </div>
                {% else %}
                    <div class="mt-3">
                        <span class="role-badge student">
                            <i class="fas fa-user-graduate me-2"></i>Student
                        </span>
                    </div>
                {% endif %}
            </div>
            
            <!-- Profile info -->
            <div class="col-md-9">
                <h1 class="display-5 fw-bold mb-3">{{ profile.name }}</h1>
                
                {% if profile.current_position or profile.current_company %}
                    <h4 class="mb-3 text-secondary">
                        {% if profile.current_position %}
                            <i class="fas fa-briefcase me-2 text-muted"></i>{{ profile.current_position }}
                        {% endif %}
                        
                        {% if profile.current_position and profile.current_company %}
                            at 
                        {% endif %}
                        
                        {% if profile.current_company %}
                            <strong>{{ profile.current_company }}</strong>
                        {% endif %}
                    </h4>
                {% endif %}
                
                {% if profile.current_location %}
                    <p class="mb-3">
                        <i class="fas fa-map-marker-alt me-2 text-muted"></i> {{ profile.current_location }}
                    </p>
                {% endif %}
                
                {% if profile.about %}
                    <div class="mb-4">
                        <h5 class="text-primary mb-2">About</h5>
                        <p class="lead">{{ profile.about }}</p>
                    </div>
                {% endif %}
                
                <!-- Contact information -->
                <div class="row mb-3">
                    <div class="col-md-8">
                        {% if profile.email %}
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i> 
                                <a href="mailto:{{ profile.email }}">{{ profile.email }}</a>
                            </div>
                        {% endif %}
                        
                        {% if profile.phone %}
                            <div class="contact-item">
                                <i class="fas fa-phone"></i> 
                                <a href="tel:{{ profile.phone }}">{{ profile.phone }}</a>
                            </div>
                        {% endif %}
                        
                        {% if profile.website %}
                            <div class="contact-item">
                                <i class="fas fa-globe"></i> 
                                <a href="{{ profile.website }}" target="_blank">{{ profile.website }}</a>
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        {% if profile.url %}
                            <a href="{{ profile.url }}" target="_blank" class="btn btn-linkedin-profile">
                                <i class="fab fa-linkedin me-2"></i> View on LinkedIn
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- Experience section -->
        <div class="col-md-6 mb-4">
            <div class="profile-section-card">
                <div class="card-header header-linkedin">
                    <h3 class="mb-0">
                        <i class="fas fa-briefcase me-2"></i> Experience
                    </h3>
                </div>
                <div class="card-body">
                    {% if detailed_data and detailed_data.experiences and detailed_data.experiences|length > 0 %}
                        <!-- If we have detailed experience data from JSON -->
                        {% for exp in detailed_data.experiences %}
                            <div class="experience-item">
                                <h5 class="section-title">{{ exp.title|default('') }}</h5>
                                <h6 class="section-subtitle">{{ exp.company|default('') }}</h6>
                                
                                {% if exp.from_date or exp.to_date %}
                                    <p class="date-range">
                                        <i class="far fa-calendar-alt me-1"></i>
                                        {{ exp.from_date|default('') }} to {{ exp.to_date|default('Present') }}
                                        {% if exp.duration %}
                                            <span class="badge bg-light text-dark ms-2">{{ exp.duration }}</span>
                                        {% endif %}
                                    </p>
                                {% endif %}
                                
                                {% if exp.location %}
                                    <p class="location-text">
                                        <i class="fas fa-map-marker-alt me-1"></i> {{ exp.location }}
                                    </p>
                                {% endif %}
                                
                                {% if exp.description %}
                                    <p class="description-text">{{ exp.description }}</p>
                                {% endif %}
                            </div>
                        {% endfor %}
                    {% elif profile.all_experiences %}
                        <!-- If we only have the CSV summary -->
                        {% for exp in profile.all_experiences.split('|') %}
                            <div class="experience-item">
                                <p>{{ exp.strip() }}</p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-info-circle mb-3 display-4 text-muted"></i>
                            <p class="text-muted">No experience information available.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <!-- Education section -->
        <div class="col-md-6 mb-4">
            <div class="profile-section-card">
                <div class="card-header header-linkedin">
                    <h3 class="mb-0">
                        <i class="fas fa-graduation-cap me-2"></i> Education
                    </h3>
                </div>
                <div class="card-body">
                    {% if detailed_data and detailed_data.educations and detailed_data.educations|length > 0 %}
                        <!-- If we have detailed education data from JSON -->
                        {% for edu in detailed_data.educations %}
                            <div class="education-item">
                                <h5 class="section-title">{{ edu.institution_name|default('') }}</h5>
                                <h6 class="section-subtitle">{{ edu.degree|default('') }}</h6>
                                
                                {% if edu.from_date or edu.to_date %}
                                    <p class="date-range">
                                        <i class="far fa-calendar-alt me-1"></i>
                                        {{ edu.from_date|default('') }} to {{ edu.to_date|default('Present') }}
                                    </p>
                                {% endif %}
                                
                                {% if edu.description %}
                                    <p class="description-text">{{ edu.description }}</p>
                                {% endif %}
                            </div>
                        {% endfor %}
                    {% elif profile.all_education %}
                        <!-- If we only have the CSV summary -->
                        {% for edu in profile.all_education.split('|') %}
                            <div class="education-item">
                                <p>{{ edu.strip() }}</p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-info-circle mb-3 display-4 text-muted"></i>
                            <p class="text-muted">No education information available.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Skills section (from either source) -->
    {% if detailed_data and detailed_data.skills and detailed_data.skills|length > 0 %}
        <div class="profile-section-card mb-4">
            <div class="card-header header-linkedin">
                <h3 class="mb-0">
                    <i class="fas fa-tools me-2"></i> Skills
                </h3>
            </div>
            <div class="card-body">
                <div class="py-2">
                    {% for skill in detailed_data.skills %}
                        <span class="skill-badge">{{ skill }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% elif profile.skills %}
        <div class="profile-section-card mb-4">
            <div class="card-header header-linkedin">
                <h3 class="mb-0">
                    <i class="fas fa-tools me-2"></i> Skills
                </h3>
            </div>
            <div class="card-body">
                <div class="py-2">
                    {% for skill in profile.skills.split(',') %}
                        <span class="skill-badge">{{ skill.strip() }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}
    
    <!-- Contact section (if available) -->
    {% if detailed_data and detailed_data.contacts and detailed_data.contacts|length > 0 %}
        <div class="profile-section-card mb-4">
            <div class="card-header header-linkedin">
                <h3 class="mb-0">
                    <i class="fas fa-address-card me-2"></i> Contact Information
                </h3>
            </div>
            <div class="card-body">
                <div class="row">
                    {% for contact in detailed_data.contacts %}
                        <div class="col-md-6">
                            <div class="contact-item">
                                <strong>{{ contact.type }}:</strong> {{ contact.value }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %} 